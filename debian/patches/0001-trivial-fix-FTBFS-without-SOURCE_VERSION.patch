From 25bd2c877141714796fce0c2e53628b167970587 Mon Sep 17 00:00:00 2001
From: Mario Limonciello <mario.limonciello@amd.com>
Date: Mon, 14 Oct 2024 19:16:25 -0500
Subject: [PATCH] trivial: fix FTBFS without SOURCE_VERSION

Link: https://buildd.debian.org/status/fetch.php?pkg=fwupd&arch=amd64&ver=1.9.26-1&stamp=1728947877&raw=0
---
 src/fu-engine.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/fu-engine.c b/src/fu-engine.c
index c02b27dc3..41537ddce 100644
--- a/src/fu-engine.c
+++ b/src/fu-engine.c
@@ -4006,8 +4006,10 @@ fu_engine_load_metadata_store(FuEngine *self, FuEngineLoadFlags flags, GError **
 	/* clear existing silo */
 	g_clear_object(&self->silo);
 
+#ifdef SOURCE_VERSION
 	/* invalidate the cache if the fwupd version changes */
 	xb_builder_append_guid(builder, SOURCE_VERSION);
+#endif
 
 	/* verbose profiling */
 	if (g_getenv("FWUPD_XMLB_VERBOSE") != NULL) {
-- 
2.43.0

